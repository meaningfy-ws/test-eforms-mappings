id: https://publications.data.eu/schema/eforms/document_metadata
name: eForms Document Metadata
prefixes:
  linkml: https://w3id.org/linkml/
  metadata: https://publications.data.eu/schema/eforms/document_metadata/
  epo: http://data.europa.eu/a4g/ontology#
  skos: http://www.w3.org/2004/02/skos/core#
  dct: http://purl.org/dc/terms/
  locn: <http://www.w3.org/ns/locn#>
  tedm: <http://data.europa.eu/a4g/mapping/sf-rml/>
  rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#>
imports:
  - linkml:types
default_range: string
default_prefix: metadata

classes:
  eFormsNoticeMetadata:
    class_uri: epo:Notice
    slots:
      - title
      - long_title
      - notice_publication_number
      - publication_date
      - ojs_issue_number
      - ojs_type
      - city_of_buyer
      - name_of_buyer
      - original_language
      - country_of_buyer
      - eu_institution
      - document_sent_date
      - deadline_for_submission
      - notice_type
      - form_type
      - place_of_performance
      - extracted_legal_basis_directive
      - legal_basis_directive
      - form_number
      - eforms_subtype
      - xsd_version
      - published_in_cellar_counter
      - notice_source
      - eform_sdk_version

slots:
  title:
    description: "Document title"
    slot_uri: dct:title
    range: string
    required: true
    multivalued: false
  long_title:
    description: "Complete Document Title"
    slot_uri: dct:title # Not totally sure
    range: string
    required: true
    multivalued: false
  notice_publication_number:
    description: "Unique identifier for the notice publication in the Official Journal"
    slot_uri: epo:hasNoticePublicationNumber
    range: string
    required: true
    multivalued: false
    pattern: "^[0-9]+-[0-9]{4}$"  # Pattern like "647661-2024"
  publication_date:
    description: "Date when the notice was published in the Official Journal"
    slot_uri: epo:hasPublicationDate
    range: string
    required: true
    multivalued: false
    format: "%Y-%m-%d"  # ISO date format
  ojs_issue_number: #Need to review from here
    description: "Issue number of the Official Journal where the notice was published"
    slot_uri: epo:hasOJSIssueNumber
    range: string
    required: true
    multivalued: false
  ojs_type:
    description: "Type of Official Journal publication (S for Supplement, L for Legislation, etc.)"
    slot_uri: epo:hasOJSType
    range: string
    required: true
    multivalued: false
  city_of_buyer:
    description: "City where the contracting authority is located"
    slot_uri: locn:postName
    range: string
    required: false
    multivalued: false
  name_of_buyer:
    description: "Name of the contracting authority or buying organization"
    slot_uri: epo:hasLegalName
    range: string
    required: false
    multivalued: false
  original_language:
    description: "Language in which the notice was originally written"
    slot_uri: epo:hasOfficialLanguage
    range: string
    required: false
    multivalued: false
  country_of_buyer:
    description: "Country where the contracting authority is located"
    slot_uri: epo:hasCountryCode
    range: string
    required: false
    multivalued: false
  eu_institution:
    description: "Whether the contracting authority is an EU institution"
    slot_uri: epo:hasBuyerLegalType
    range: boolean
    required: false
    multivalued: false
  document_sent_date:
    description: "Date when the notice was sent to the Official Journal"
    slot_uri: epo:hasESenderDispatchDate
    range: string
    required: false
    multivalued: false
    format: "%Y-%m-%d"
  deadline_for_submission:
    description: "Deadline for submitting tenders or applications"
    slot_uri: epo:hasReceiptTenderDeadline
    range: string
    required: false
    multivalued: false
    format: "%Y-%m-%d"
  notice_type:
    description: "Type of notice (e.g., contract notice, award notice, etc.)"
    slot_uri: epo:hasNoticeType
    range: string
    required: true
    multivalued: false
  form_type:
    description: "Type of form used for the notice"
    slot_uri: epo:hasFormType
    range: string
    required: true
    multivalued: false
    pattern: "^[A-Z0-9]+$"
  place_of_performance:
    description: "Geographic locations where the contract will be performed (NUTS codes)"
    slot_uri: locn:fullAddress
    range: string
    required: false
    multivalued: true
  extracted_legal_basis_directive:
    description: "Legal basis directive extracted from the notice content"
    slot_uri: epo:hasLegalBasisDescription
    range: string
    required: false
    multivalued: false
  legal_basis_directive:
    description: "Legal basis directive for the notice"
    slot_uri: epo:hasLegalBasis
    range: string
    required: true
    multivalued: false
  form_number:
    description: "Form number identifier for the notice"
    slot_uri: epo:hasVersion
    range: string
    required: true
    multivalued: false
    pattern: "^F[0-9]{2}$"
  eforms_subtype:
    description: "Subtype of the eForms notice"
    slot_uri: rdf:type
    range: string
    required: true
    multivalued: false
  xsd_version:
    description: "Version of the XSD schema used"
    slot_uri: dct:hasVersion #Not sure
    range: string
    required: false
    multivalued: false
    pattern: "^[0-9]+\\.[0-9]+\\.[0-9]+$"
  published_in_cellar_counter:
    description: "Counter for notices published in CELLAR database"
    slot_uri: dct:identifier #Not sure
    range: integer
    required: true
    multivalued: false
    minimum_value: 0
  notice_source:
    description: "Source of the notice (standard form or electronic form)"
    slot_uri: dct:source #Not sure
    range: string
    required: false
    multivalued: false
    enum:
      - "standard_forms"
      - "eforms"
  eform_sdk_version:
    description: "Version of the eForms SDK used"
    slot_uri: tedm:minSDKVersion
    range: string
    required: false
    multivalued: false
    pattern: "^[0-9]+\\.[0-9]+\\.[0-9]+$"